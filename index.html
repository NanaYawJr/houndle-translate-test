<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Houndle Translate Test</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Tailwind for styling -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Hide Google Translate banner -->
  <style>
    .goog-te-banner-frame.skiptranslate {
      display: none !important;
    }

    body {
      top: 0 !important;
    }

    .goog-tooltip, .goog-tooltip:hover, .goog-text-highlight {
      display: none !important;
      background: none !important;
      box-shadow: none !important;
    }

    #google_translate_element {
      display: none;
    }
  </style>

  <!-- Google Translate -->
  <script type="text/javascript">
    function googleTranslateElementInit() {
      new google.translate.TranslateElement({
        pageLanguage: 'en',
        includedLanguages: 'en,fr,es,de,zh-CN',
        layout: google.translate.TranslateElement.InlineLayout.SIMPLE
      }, 'google_translate_element');
    }
  </script>
  <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</head>

<body class="p-8 font-sans text-gray-900">

  <div id="google_translate_element"></div>

  <h1 class="text-3xl font-bold mb-4">üåç Custom Language Switcher</h1>
  <p class="mb-6">This is a test page for using Google Translate with a custom dropdown.</p>

  <label for="languageSwitcher" class="font-medium">Select Language:</label>
  <select id="languageSwitcher" class="border px-4 py-2 rounded">
    <option value="en">English</option>
    <option value="fr">Fran√ßais</option>
    <option value="es">Espa√±ol</option>
    <option value="de">Deutsch</option>
    <option value="zh-CN">‰∏≠Êñá</option>
  </select>

  <!-- Custom translation script -->
  <script>
    function setLanguage(lang) {
      const interval = setInterval(() => {
        const iframe = document.querySelector('iframe.goog-te-menu-frame');
        if (!iframe) return;

        const innerDoc = iframe.contentDocument || iframe.contentWindow.document;
        const items = innerDoc.querySelectorAll('.goog-te-menu2-item span.text');

        items.forEach(el => {
          if (el.innerText.toLowerCase().includes(lang.toLowerCase())) {
            el.click();
            clearInterval(interval);
          }
        });
      }, 500);
    }

    document.getElementById('languageSwitcher').addEventListener('change', function () {
      const lang = this.value;

      // Open the menu frame before interacting
      const googFrameButton = document.querySelector('.goog-te-combo');
      if (googFrameButton) {
        googFrameButton.value = lang;
        googFrameButton.dispatchEvent(new Event('change'));
      } else {
        setLanguage(lang);
      }
    });
  </script>

</body>
</html>
